# Time Hedge (SwiftBar Plugin)

ä¸€ä¸ªåŸºäº **SwiftBar** çš„ macOS çŠ¶æ€æ æ’ä»¶ï¼Œç”¨äºç®¡ç†â€œæ¬ç –â€ä¸â€œç ”ç©¶â€çš„æ—¶é—´å€ºåŠ¡ã€‚

## æ ¸å¿ƒç†å¿µ (Arbitrage)

è¿™ä¸ä»…ä»…æ˜¯ä¸€ä¸ªè®¡æ—¶å™¨ï¼Œè€Œæ˜¯ä¸€ä¸ª**æ—¶é—´å¥—åˆ©**å·¥å…·ã€‚
*   **æ¬ç – (Work)**: äº§ç”Ÿä»·å€¼ï¼Œç§¯ç´¯ creditã€‚**(+1.0/h)**
*   **ç ”ç©¶ (Research)**: æ¶ˆè€—æ—¶é—´ï¼Œäº§ç”Ÿè´Ÿå€ºã€‚**(-4.0/h)**

é€šè¿‡é«˜æ æ†çš„â€œå€ºåŠ¡å‹åŠ›â€ï¼Œè¿«ä½¿è‡ªå·±åœ¨è¿›è¡Œæ¢ç´¢æ€§ç ”ç©¶æ—¶ä¿æŒæé«˜çš„æ•ˆç‡ã€‚

## ç›®å½•ç»“æ„

æœ¬é¡¹ç›®å±•ç¤ºäº†ä»åŸå‹åˆ°æè‡´æ€§èƒ½çš„æ¼”è¿›è¿‡ç¨‹ï¼š

1.  **`time_hedge.1s.py`**: Python åŸå‹ç‰ˆæœ¬ (MVP)ã€‚
    *   å¼€å‘å¿«ï¼Œä½†å¯åŠ¨æ…¢ (~40ms overhead)ï¼Œæ¯ç§’åªæœ‰ä¸€æ¬¡ã€‚
2.  **`time_hedge.go`**: Go è¯­è¨€é‡å†™ç‰ˆã€‚
    *   ç¼–è¯‘ä¸ºäºŒè¿›åˆ¶ï¼Œå¯åŠ¨æå¿« (3-4ms)ã€‚
3.  **`time_hedge_rs/`**: Rust è¯­è¨€é‡å†™ç‰ˆ (å½“å‰ä¸»ç‰ˆæœ¬)ã€‚
    *   **Zero Runtime**ï¼Œæè‡´æ€§èƒ½ (3ms)ï¼Œä¸”éå¸¸å®‰å…¨ã€‚

## å®‰è£…æŒ‡å—

### 1. ä¾èµ–
éœ€è¦å…ˆå®‰è£… [SwiftBar](https://github.com/swiftbar/SwiftBar):
```bash
brew install --cask swiftbar
```

### 2. æ„å»º (Rust ç‰ˆæœ¬)
```bash
cd time_hedge_rs
cargo build --release
```

### 3. å®‰è£… (Symlink)
SwiftBar éœ€è¦ä¸€ä¸ªæŒ‡å‘è¯¥é¡¹ç›®çš„è½¯é“¾æ¥ã€‚
æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ª Shell Wrapper (`time_hedge.1s.sh`) æ¥ç¡®ä¿ SwiftBar èƒ½æ­£ç¡®è¯†åˆ«å¹¶æ‰§è¡ŒäºŒè¿›åˆ¶æ–‡ä»¶ã€‚

**è‡ªåŠ¨é…ç½®å‘½ä»¤ (åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹è¿è¡Œ):**
```bash
# 1. èµ‹äºˆè„šæœ¬æ‰§è¡Œæƒé™
chmod +x time_hedge.1s.sh

# 2. åˆ›å»ºè½¯é“¾æ¥åˆ° SwiftBar æ’ä»¶ç›®å½• (å‡è®¾åœ¨ ~/Documents/SwiftBarPlugins)
ln -s "$(pwd)/time_hedge.1s.sh" ~/Documents/SwiftBarPlugins/time_hedge.1s.sh
```

## ä½¿ç”¨è¯´æ˜
*   ç‚¹å‡»çŠ¶æ€æ æ•°å­—ï¼Œé€‰æ‹©æ¨¡å¼ï¼š
    *   ğŸ§ª **Research**: å¼€å§‹è®¡æ—¶ (4å€æ‰£åˆ†)ã€‚
    *   ğŸ”¨ **Work**: å¼€å§‹å›è¡€ (1å€åŠ åˆ†)ã€‚
    *   â¸ **Stop**: æš‚åœè®¡æ—¶ã€‚
*   **Refresh**: å¦‚æœä¿®æ”¹äº†ä»£ç æˆ–é‡æ–°ç¼–è¯‘ï¼ŒSwiftBar ä¼šè‡ªåŠ¨åˆ·æ–°ï¼Œæˆ–æ‰‹åŠ¨ç‚¹å‡» Refresh Allã€‚
*   **Data**: æ•°æ®å­˜å‚¨åœ¨ `~/.time_hedge_data.json`ã€‚

## æ€§èƒ½å¯¹æ¯”
| Version | Language | Startup Time | Verdict |
| :--- | :--- | :--- | :--- |
| v1 | Python | ~46ms | Good enough |
| v2 | Go | ~4ms | Excellent |
| v3 | Rust | ~3ms | **Ultimate** |

---
Enjoy your arbitrage.
